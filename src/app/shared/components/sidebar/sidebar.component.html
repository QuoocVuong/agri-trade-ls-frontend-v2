<aside class="fixed inset-y-0 left-0 w-64 bg-gradient-to-b from-base-100 to-base-200 text-base-content transform transition-transform duration-300 ease-in-out z-50 lg:static lg:transform-none" [ngClass]="{'-translate-x-full': !isMenuOpen, 'translate-x-0': isMenuOpen}">
  <!-- Nút toggle cho di động -->
  <div class="lg:hidden flex justify-between items-center p-4 border-b border-base-300">
    <span class="font-bold text-lg">Menu</span>
    <button (click)="toggleMenu()" class="btn btn-ghost">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
  </div>

  <!-- Menu content -->
  <div class="p-4 lg:p-6 overflow-y-auto h-full">
    <div class="font-bold text-xl mb-4 hidden lg:block">Menu</div>
    <ul class="menu w-full space-y-1">
      <!-- User Menu -->
      <ng-container *ngIf="menuType === 'user'">

        <li>
          <a routerLink="/user/profile" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
            Trang cá nhân
          </a>
        </li>
        <li>
          <a routerLink="/user/orders" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
            Đơn hàng của tôi
          </a>
        </li>
        <li>
          <a routerLink="/user/addresses" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path></svg>
            Sổ địa chỉ
          </a>
        </li>
        <li>
          <a routerLink="/user/favorites" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
            Sản phẩm yêu thích
          </a>
        </li>
        <li>
          <a routerLink="/user/my-reviews" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.518 4.674a1 1 0 00.95.69h4.91c.969 0 1.371 1.24.588 1.81l-3.974 2.89a1 1 0 00-.364 1.118l1.518 4.674c.3.921-.755 1.688-1.538 1.118l-3.974-2.89a1 1 0 00-1.175 0l-3.974 2.89c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.364-1.118l-3.974-2.89c-.783-.57-.38-1.81.588-1.81h4.91a1 1 0 00.95-.69l1.518-4.674z" />
            </svg>
            Danh Sách Review
          </a>
        </li>

        <li *ngIf="!isFarmer()">
          <a routerLink="/user/profile/farmer-profile" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
            Đăng ký bán hàng
          </a>
        </li>
        <li *ngIf="!isBusinessBuyer()">
          <a routerLink="/user/profile/business-profile" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>
            Đăng ký doanh nghiệp
          </a>
        </li>
      </ng-container>

      <!-- Farmer Menu -->
      <ng-container *ngIf="menuType === 'farmer'">
        <li>
          <a routerLink="/farmer/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2m-6 0h14m-4 4H4m0 4h16m-4 4H4"></path></svg>
            Bảng điều khiển
          </a>
        </li>
        <li>
          <details class="dropdown">
            <summary class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors cursor-pointer">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0v6a2 2 0 01-2 2H6a2 2 0 01-2-2V7m16 0L12 3l-8 4"></path></svg>
              Sản phẩm
            </summary>
            <ul class="menu dropdown-content bg-base-200 rounded-lg w-full mt-1 p-2 shadow">
              <li><a routerLink="/farmer/products" routerLinkActive="active" class="py-2 px-4 hover:bg-base-300 rounded-lg">Danh sách sản phẩm</a></li>
              <li><a routerLink="/farmer/products/new" routerLinkActive="active" class="py-2 px-4 hover:bg-base-300 rounded-lg">Thêm sản phẩm mới</a></li>
            </ul>
          </details>
        </li>
        <li>
          <a routerLink="/farmer/orders" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
            Đơn hàng
          </a>
        </li>
        <li>
          <a routerLink="/farmer/reviews" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
            Đánh giá
          </a>
        </li>
        <li>
          <a routerLink="/farmer/profile" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
            Hồ sơ gian hàng
          </a>
        </li>
      </ng-container>

      <!-- Admin Menu -->
      <ng-container *ngIf="menuType === 'admin'">
        <li>
          <a routerLink="/admin/dashboard" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2m-6 0h14m-4 4H4m0 4h16m-4 4H4"></path></svg>
            Bảng điều khiển
          </a>
        </li>
        <li>
          <a routerLink="/admin/users" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            Quản lý người dùng
          </a>
        </li>
        <li>
          <a routerLink="/admin/farmers/pending" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
            Duyệt nông dân
          </a>
        </li>
        <li>
          <a routerLink="/admin/categories" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
            Quản lý danh mục
          </a>
        </li>
        <li>
          <a routerLink="/admin/products" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0v6a2 2 0 01-2 2H6a2 2 0 01-2-2V7m16 0L12 3l-8 4"></path></svg>
            Quản lý sản phẩm
          </a>
        </li>
        <li>
          <a routerLink="/admin/orders" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
            Quản lý đơn hàng
          </a>
        </li>
        <li>
          <a routerLink="/admin/reviews/pending" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
            Duyệt đánh giá
          </a>
        </li>
        <li>
          <a routerLink="/admin/roles" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0 1.104-.896 2-2 2s-2-.896-2-2 2-4 2-4 2 2.896 2 4zm0 0c0 1.104.896 2 2 2s2-.896 2-2-2-4-2-4-2 2.896-2 4zm-6 7v-2a4 4 0 014-4h4a4 4 0 014 4v2"></path></svg>
            Quản lý phân quyền
          </a>
        </li>
      </ng-container>

      <!-- Common Menu -->
      <li>
        <a routerLink="/chat" routerLinkActive="active" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-base-300 transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
          Tin nhắn
        </a>
      </li>
      <li>
        <a (click)="logout()" class="flex items-center gap-3 py-3 px-4 rounded-lg hover:bg-error hover:text-error-content transition-colors">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>
          Đăng xuất
        </a>
      </li>
    </ul>
  </div>
</aside>

<!-- Overlay for mobile menu -->
<div *ngIf="isMenuOpen" class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden" (click)="toggleMenu()"></div>
