<h2 class="card-title justify-center text-2xl md:text-3xl font-semibold mb-4 text-base-content dark:text-gray-200">
  Quên Mật Khẩu?
</h2>
<p class="text-center text-sm text-base-content/70 dark:text-gray-400 mb-8 max-w-xs mx-auto">
  Đừng lo lắng! Nhập địa chỉ email của bạn dưới đây và chúng tôi sẽ gửi cho bạn một liên kết để đặt lại mật khẩu.
</p>

<!-- Success/Error Messages -->
<app-alert *ngIf="successMessage()" type="success" [message]="successMessage()" class="mb-4"></app-alert>
<app-alert *ngIf="errorMessage()" type="error" [message]="errorMessage()" class="mb-4"></app-alert>

<form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="w-full space-y-4">
  <!-- Email -->
  <div class="form-control w-full">
    <label class="label sr-only" for="forgot-email"><span class="label-text">Email đã đăng ký</span></label>
    <div class="relative">
      <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-base-content/40 dark:text-gray-500">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
          <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
        </svg>
      </span>
      <input id="forgot-email" type="email" placeholder="Nhập email của bạn"
             class="input input-bordered w-full pl-10 py-2.5 dark:bg-gray-700 dark:border-gray-600"
             formControlName="email"
             [ngClass]="{'input-error': forgotPasswordForm.controls['email'].invalid && forgotPasswordForm.controls['email'].touched}" />
    </div>
    <label class="label h-5 py-0" *ngIf="forgotPasswordForm.controls['email'].invalid && forgotPasswordForm.controls['email'].touched">
      <span class="label-text-alt text-error text-xs" *ngIf="forgotPasswordForm.controls['email'].errors?.['required']">Email không được để trống.</span>
      <span class="label-text-alt text-error text-xs" *ngIf="forgotPasswordForm.controls['email'].errors?.['email']">Email không đúng định dạng.</span>
    </label>
  </div>

  <div class="form-control mt-6">
    <button type="submit" class="btn btn-primary w-full py-3 text-base font-semibold dark:text-white" [disabled]="isLoading() || forgotPasswordForm.invalid">
      <span *ngIf="isLoading()" class="loading loading-spinner loading-sm"></span>
      {{ isLoading() ? 'Đang gửi...' : 'Gửi Liên Kết Đặt Lại' }}
    </button>
  </div>

  <div class="text-center mt-6 text-sm">
    <a routerLink="/auth/login" class="link link-hover text-base-content/80 dark:text-gray-400 hover:text-primary dark:hover:text-green-400">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
      </svg>
      Quay lại Đăng nhập
    </a>
  </div>
</form>
