<h2 class="card-title justify-center text-2xl mb-4">Quên mật khẩu</h2>
<p class="text-center text-sm text-base-content/70 mb-6">Nhập email của bạn để nhận liên kết đặt lại mật khẩu.</p>

<!-- Success/Error Messages -->
<div *ngIf="successMessage()" class="alert alert-success shadow-sm mb-4 text-sm p-2"><span>{{ successMessage() }}</span></div>
<div *ngIf="errorMessage()" class="alert alert-error shadow-sm mb-4 text-sm p-2"><span>Lỗi: {{ errorMessage() }}</span></div>


<form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="w-full">
  <!-- Email -->
  <div class="form-control w-full">
    <label class="label"><span class="label-text">Email đã đăng ký</span></label>
    <input type="email" placeholder="Nhập email" class="input input-bordered w-full input-sm"
           formControlName="email"
           [ngClass]="{'input-error': forgotPasswordForm.controls['email'].invalid && forgotPasswordForm.controls['email'].touched}" />
    <label class="label" *ngIf="forgotPasswordForm.controls['email'].invalid && forgotPasswordForm.controls['email'].touched">
      <span class="label-text-alt text-error" *ngIf="forgotPasswordForm.controls['email'].errors?.['required']">Email là bắt buộc.</span>
      <span class="label-text-alt text-error" *ngIf="forgotPasswordForm.controls['email'].errors?.['email']">Email không hợp lệ.</span>
    </label>
  </div>

  <div class="form-control mt-6">
    <button type="submit" class="btn btn-primary btn-sm" [disabled]="isLoading() || forgotPasswordForm.invalid">
      <span *ngIf="isLoading()" class="loading loading-spinner loading-xs"></span>
      {{ isLoading() ? 'Đang gửi...' : 'Gửi liên kết đặt lại' }}
    </button>
  </div>

  <div class="text-center mt-4 text-sm">
    <a routerLink="/auth/login" class="link link-hover">Quay lại Đăng nhập</a>
  </div>
</form>
