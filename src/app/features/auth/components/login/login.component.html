<h2 class="card-title justify-center text-2xl mb-4">Đăng nhập</h2>

<!-- Error Message -->
<div *ngIf="errorMessage()" class="alert alert-error shadow-sm mb-4 text-sm p-2">
  <span>{{ errorMessage() }}</span>
</div>

<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="w-full">
  <!-- Email -->
  <div class="form-control w-full">
    <label class="label"><span class="label-text">Email</span></label>
    <input type="email" placeholder="Nhập email" class="input input-bordered w-full input-sm"
           formControlName="email"
           [ngClass]="{'input-error': loginForm.controls['email'].invalid && loginForm.controls['email'].touched}" />
    <label class="label" *ngIf="loginForm.controls['email'].invalid && loginForm.controls['email'].touched">
      <span class="label-text-alt text-error" *ngIf="loginForm.controls['email'].errors?.['required']">Email là bắt buộc.</span>
      <span class="label-text-alt text-error" *ngIf="loginForm.controls['email'].errors?.['email']">Email không hợp lệ.</span>
    </label>
  </div>

  <!-- Password -->
  <div class="form-control w-full mt-2">
    <label class="label">
      <span class="label-text">Mật khẩu</span>
      <a routerLink="/auth/forgot-password" class="label-text-alt link link-hover text-xs">Quên mật khẩu?</a>
    </label>
    <input type="password" placeholder="Nhập mật khẩu" class="input input-bordered w-full input-sm"
           formControlName="password"
           [ngClass]="{'input-error': loginForm.controls['password'].invalid && loginForm.controls['password'].touched}" />
    <label class="label" *ngIf="loginForm.controls['password'].invalid && loginForm.controls['password'].touched">
      <span class="label-text-alt text-error">Mật khẩu là bắt buộc.</span>
    </label>
  </div>

  <div class="form-control mt-6">
    <button type="submit" class="btn btn-primary btn-sm" [disabled]="isLoading() || loginForm.invalid">
      <span *ngIf="isLoading()" class="loading loading-spinner loading-xs"></span>
      {{ isLoading() ? 'Đang xử lý...' : 'Đăng nhập' }}
    </button>
  </div>

  <div class="divider text-xs">Chưa có tài khoản?</div>
  <a routerLink="/auth/register" class="btn btn-outline btn-sm w-full">Đăng ký ngay</a>

</form>
